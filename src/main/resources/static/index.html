<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Number Trick Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      text-align: center;
      padding: 50px;
    }
    .card {
      background: rgba(0,0,0,0.4);
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0px 4px 20px rgba(0,0,0,0.5);
      max-width: 500px;
      margin: auto;
    }
    input, select, button {
      padding: 10px;
      margin: 10px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
    }
    button {
      background: #ff9800;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #e68900;
    }
    #countdown {
      font-size: 30px;
      font-weight: bold;
      margin-top: 20px;
    }
    #result {
      font-size: 22px;
      margin-top: 20px;
    }
    #instructions {
      text-align: left;
      margin: 20px 0;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h2 id="title">Number Trick Game üé©</h2>

    <label for="lang">üåê Select Language:</label>
    <select id="lang" onchange="changeLang()">
      <option value="en">English</option>
      <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
      <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
    </select>

    <div id="instructions"></div>

    <input type="number" id="finalNumber" placeholder="Enter your final number" />
    <br/>
    <button onclick="startTrick()">Reveal Magic ‚ú®</button>

    <div id="countdown"></div>
    <div id="result"></div>
  </div>

  <script>
    // Text for different languages
    let texts = {
      en: {
        title: "Number Trick Game üé©",
        instructions: `
          1. Think of a number between 1‚Äì9.<br>
          2. Multiply it by 2.<br>
          3. Add 6.<br>
          4. Divide the whole answer by 2.<br>
          üëâ Now enter the number you got:
        `,
        suspense: "Your hidden number is...",
        reveal: "Your original number is: "
      },
      mr: {
        title: "‡§®‡§Ç‡§¨‡§∞ ‡§ü‡•ç‡§∞‡§ø‡§ï ‡§ó‡•á‡§Æ üé©",
        instructions: `
          1. ‡§Æ‡§®‡§æ‡§§ 1‚Äì9 ‡§Æ‡§ß‡§≤‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§ò‡•ç‡§Ø‡§æ.<br>
          2. ‡§§‡•ç‡§Ø‡§æ‡§≤‡§æ <b>2 ‡§®‡•á ‡§ó‡•Å‡§£‡§æ</b> ‡§ï‡§∞‡§æ.<br>
          3. ‡§§‡•ç‡§Ø‡§æ‡§§ <b>6 ‡§ú‡•ã‡§°‡§æ</b>.<br>
          4. ‡§Ü‡§§‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§â‡§§‡•ç‡§§‡§∞‡§æ‡§≤‡§æ <b>2 ‡§®‡•á ‡§≠‡§æ‡§ó‡§æ</b>.<br>
          üëâ ‡§Ü‡§§‡§æ ‡§Ü‡§≤‡•á‡§≤‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§á‡§•‡•á ‡§ü‡§æ‡§ï‡§æ:
        `,
        suspense: "‡§§‡•Å‡§Æ‡§ö‡§Ç ‡§Æ‡§®‡§æ‡§§‡§≤‡§Ç ‡§®‡§Ç‡§¨‡§∞ ‡§Ü‡§π‡•á...",
        reveal: "‡§§‡•Å‡§ù‡§æ ‡§Æ‡•Ç‡§≥ ‡§®‡§Ç‡§¨‡§∞ ‡§Ü‡§π‡•á: "
      },
      hi: {
        title: "‡§®‡§Ç‡§¨‡§∞ ‡§ü‡•ç‡§∞‡§ø‡§ï ‡§ó‡•á‡§Æ üé©",
        instructions: `
          1. 1‚Äì9 ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§®‡§Ç‡§¨‡§∞ ‡§∏‡•ã‡§ö‡•ã‡•§<br>
          2. ‡§â‡§∏‡•á <b>2 ‡§∏‡•á ‡§ó‡•Å‡§£‡§æ ‡§ï‡§∞‡•ã</b>‡•§<br>
          3. ‡§â‡§∏‡§Æ‡•á‡§Ç <b>6 ‡§ú‡•ã‡§°‡§º‡•ã</b>‡•§<br>
          4. ‡§Ö‡§¨ ‡§™‡•Ç‡§∞‡•á ‡§â‡§§‡•ç‡§§‡§∞ ‡§ï‡•ã <b>2 ‡§∏‡•á ‡§≠‡§æ‡§ó ‡§¶‡•ã</b>‡•§<br>
          üëâ ‡§Ö‡§¨ ‡§ú‡•ã ‡§®‡§Ç‡§¨‡§∞ ‡§Ü‡§Ø‡§æ ‡§π‡•à ‡§µ‡•ã ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•ã:
        `,
        suspense: "‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§∏‡§≤‡•Ä ‡§®‡§Ç‡§¨‡§∞ ‡§π‡•à...",
        reveal: "‡§Ü‡§™‡§ï‡§æ ‡§Æ‡•Ç‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§π‡•à: "
      }
    };

    // Default language setup
    function changeLang() {
      let lang = document.getElementById("lang").value;
      document.getElementById("title").innerText = texts[lang].title;
      document.getElementById("instructions").innerHTML = texts[lang].instructions;
    }
    changeLang();

    // Trick start
    function startTrick() {
      let num = document.getElementById("finalNumber").value;
      let lang = document.getElementById("lang").value;

      if(!num) {
        alert("Please enter a number!");
        return;
      }

      document.getElementById("result").innerText = "";
      let countdown = document.getElementById("countdown");

      // Suspense message first
      countdown.innerText = texts[lang].suspense;

      let count = 3;
      setTimeout(() => {
        countdown.innerText = count;

        let timer = setInterval(() => {
          count--;
          if(count > 0) {
            countdown.innerText = count;
          } else {
            clearInterval(timer);
            countdown.innerText = "";

            // Call backend
			// Backend call (CORRECT)
			fetch(`/api/trick/guess/${num}`)
			  .then(res => res.text())
			  .then(data => {
			    document.getElementById("result").innerText = texts[lang].reveal + data;
			  })
			  .catch(err => {
			    document.getElementById("result").innerText = "Error contacting server!";
			  });

          }
        }, 1000);
      }, 1000);
    }
  </script>
</body>
</html>
